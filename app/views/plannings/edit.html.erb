<%= render 'activities/header' %>

<div id="schedule-grid" class="mdl-grid">
  <div class="mdl-cell--12-col-desktop">
    <div class="activity-insert-card-wide mdl-card mdl-shadow--2dp">
      <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Nuove Pianificazioni per l'attivita'</h2>
      </div>


      <div class="mdl-card__supporting-text">

        <% case @planning.activity.a_type %>
        <% when '0' %>

            <%= form_for setup_planning(@planning) do |f| %>
                <div>Devi inserire esattamente <%= @planning.activity.n_times %> orari visto che si tratta di un'attivita' GIORNALIERA<br>
                  da fare esattmante  <%= @planning.activity.n_times %>/GIORNO </div>

                <%= f.fields_for :schedules do |ff| %>
                    <div>
                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <%= ff.text_field :time, class: 'daily-input mdl-textfield__input', :as => :string, :value => time_format(ff.object.time), pattern: '^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$', 'data-daily' => true %>
                        <%= ff.label :time, 'Ora', class: 'mdl-textfield__label' %>
                        <span class="mdl-textfield__error">Ora nel formato 24h e HH:mm</span>
                      </div>
                    </div>
                <% end %>

                <div>
                  <button id="daily-submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" type="submit" disabled="disabled">
                    <i class="material-icons">add</i> &nbsp Aggiungi PIANIFICAZIONE all'attivita'
                  </button>
                </div>
            <% end %>

        <% when '1' %>

            <%= form_for setup_planning(@planning) do |form| %>
                <% days_of_week = [['', ''], ['Lunedi', 0], ['Martedi', 1],['Mercoledi', 2],
                                   ['Giovedi', 3],['Venerdi', 4],['Sabato', 5],['Domenica', 6]] %>

                <br>Devi inserire esattamante <%= @planning.activity.n_times %> ORARI di tipo GIORNO, visto che l'attivita' <br>
                presa in considerazione e' un'attivita' SETTIMANALE da fare <%= @planning.activity.n_times %>/SETTIMANA. <br>

                <%= form.fields_for :schedules do |f| %>
                    <div>
                      <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label">
                        <%= f.select :day, options_for_select(days_of_week, f.object.day), {}, {class: 'mdl-selectfield__select'} %>
                        <div class="mdl-selectfield__icon"><i class="material-icons">arrow_drop_down</i></div>
                        <label class="mdl-selectfield__label" for="professsion">Giorno</label>
                      </div>

                      <div class="time-sched mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <%= f.text_field :time, class: 'mdl-textfield__input', :as => :string, :value => time_format(f.object.time),
                                         pattern: '^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$' %>
                        <%= f.label :time, 'Ora', class: 'mdl-textfield__label' %>
                        <span class="mdl-textfield__error">Ora nel formato 24h e HH:mm</span>
                      </div>

                    </div>
                <% end %>
                <br><br>
                <div>
                  <button id="add-hour-btn" class="add-hour mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" >
                    <i class="material-icons">alarm_add</i> &nbsp Aggiungi Ora
                  </button>
                </div>
                <br><br>
                <div>
                  <button id="weekly-submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" type="submit">
                    <i class="material-icons">add</i> &nbsp Aggiungi PIANIFICAZIONE all'attivita'
                  </button>
                </div>

            <% end %>

        <% else %>

            <br>
            <div class="weekly-schedules-forms">

              <%= form_for setup_planning(@planning) do |form| %>
                  <br>Devi inserire esattamante <%= @planning.activity.n_times %> ORARI di tipo DATA, visto che l'attivita' <br>
                  presa in considerazione e' un'attivita' MENSILE da fare <%= @planning.activity.n_times %>/MESE. <br>

                  <%= form.fields_for :schedules do |f| %>
                      <div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <%= f.text_field :date, class: 'mdl-textfield__input monthly-schedule-date', :as => :string, :value => date_format(f.object.date),

                                           pattern: '^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$' %>
                          <%= f.label :date, 'Data', class: 'mdl-textfield__label' %>
                          <span class="mdl-textfield__error">Data nella forma GG/MM/AAAA oppure GG.MM.AAA oppure GG-MM-AAAA</span>
                        </div>

                        <div class="time-sched mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <%= f.text_field :time, class: 'mdl-textfield__input',  :as => :string, :value => time_format(f.object.time),
                                           pattern: '^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$' %>
                          <%= f.label :time, 'Ora', class: 'mdl-textfield__label' %>
                          <span class="mdl-textfield__error">Ora nel formato 24h e HH:mm</span>
                        </div>


                      </div>

                  <% end %>
                  <br><br>

                  <div>
                    <button id="add-hour-btn" class="add-hour mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" type="submit">
                      <i class="material-icons">alarm_add</i> &nbsp Aggiungi Ora
                    </button>
                  </div>
                  <br><br>
                  <div>
                    <button id="monthly-submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" type="submit">
                      <i class="material-icons">add</i> &nbsp Aggiungi PIANIFICAZIONE all'attivita'
                    </button>
                  </div>

              <% end %>

            </div>

        <% end %>

      </div>
    </div>

  </div>
</div>

